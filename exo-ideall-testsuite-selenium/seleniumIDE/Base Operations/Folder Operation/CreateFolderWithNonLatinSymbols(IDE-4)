package com.example.tests;

import com.thoughtworks.selenium.*;
import java.util.regex.Pattern;

public class CreateFolderWithNonLatinSymbols(IDE-4) extends SeleneseTestCase {
	public void setUp() throws Exception {
		setUp("http://change-this-to-the-site-you-are-testing/", "*chrome");
	}
	public void testCreateFolderWithNonLatinSymbols(IDE-4)() throws Exception {
		selenium.open("/org.exoplatform.ideall.IDEApplication/IDEApplication.html?gwt.codesvr=127.0.0.1:9997");
		Thread.sleep(1000);
		selenium.mouseDownAt("//div[@title='New']//img", "");
		selenium.mouseUpAt("//div[@title='New']//img", "");
		selenium.mouseDownAt("//td[@class=\"exo-popupMenuTitleField\"]//nobr[contains(text(), \"Folder\")]", "");
		assertTrue(selenium.isElementPresent("scLocator=//Window[ID=\"ideCreateFolderForm\"]"));
		selenium.type("scLocator=//DynamicForm[ID=\"ideCreateFolderFormDynamicForm\"]/item[name=ideCreateFolderFormNameField]/element", "");
		selenium.click("scLocator=//DynamicForm[ID=\"ideCreateFolderFormDynamicForm\"]/item[name=ideCreateFolderFormNameField]/element");
		selenium.type("scLocator=//DynamicForm[ID=\"ideCreateFolderFormDynamicForm\"]/item[name=ideCreateFolderFormNameField]/element", "Текстовая папка");
		assertEquals("Текстовая папка", selenium.getValue("scLocator=//DynamicForm[ID=\"ideCreateFolderFormDynamicForm\"]/item[name=ideCreateFolderFormNameField]/element"));
		selenium.click("scLocator=//IButton[ID=\"ideCreateFolderFormCreateButton\"]/");
		assertFalse(selenium.isElementPresent("scLocator=//Window[ID=\"ideCreateFolderForm\"]"));
		for (int second = 0;; second++) {
			if (second >= 60) fail("timeout");
			try { if (selenium.isTextPresent("Тестовая папка")) break; } catch (Exception e) {}
			Thread.sleep(1000);
		}

		assertTrue(selenium.isElementPresent("scLocator=//TreeGrid[ID=\"ideItemTreeGrid\"]/body/row[name=Тестовая папка]/col[fieldName=nodeTitle||0]"));
		selenium.mouseDownAt("//div[@title='Delete Item(s)...']//img", "");
		selenium.mouseUpAt("//div[@title='Delete Item(s)...']//img", "");
		Thread.sleep(1000);
		assertTrue(selenium.isElementPresent("scLocator=//Window[ID=\"ideDeleteItemForm\"]"));
		assertTrue(selenium.isElementPresent("scLocator=//IButton[ID=\"ideDeleteItemFormOkButton\"]"));
		assertTrue(selenium.isElementPresent("scLocator=//IButton[ID=\"ideDeleteItemFormCancelButton\"]"));
		assertTrue(selenium.isTextPresent("exact:Do you want to delete Тестовая папка ?"));
		selenium.click("scLocator=//IButton[ID=\"ideDeleteItemFormOkButton\"]");
		Thread.sleep(1000);
		assertFalse(selenium.isElementPresent("scLocator=//Window[ID=\"ideDeleteItemForm\"]"));
		assertFalse(selenium.isElementPresent("scLocator=//TreeGrid[ID=\"ideItemTreeGrid\"]/body/row[name=Текстовая папка]/col[fieldName=nodeTitle||0]"));
	}
}
