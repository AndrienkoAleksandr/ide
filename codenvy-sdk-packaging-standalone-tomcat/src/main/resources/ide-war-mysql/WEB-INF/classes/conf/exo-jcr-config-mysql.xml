<!--
  ~ CODENVY CONFIDENTIAL
  ~ __________________
  ~
  ~ [2012] - [2013] Codenvy, S.A.
  ~ All Rights Reserved.
  ~
  ~ NOTICE:  All information contained herein is, and remains
  ~ the property of Codenvy S.A. and its suppliers,
  ~ if any.  The intellectual and technical concepts contained
  ~ herein are proprietary to Codenvy S.A.
  ~ and its suppliers and may be covered by U.S. and Foreign Patents,
  ~ patents in process, and are protected by trade secret or copyright law.
  ~ Dissemination of this information or reproduction of this material
  ~ is strictly forbidden unless prior written permission is obtained
  ~ from Codenvy S.A..
  -->
<repository-service default-repository="repository">
    <repositories>
        <repository name="repository" system-workspace="production" default-workspace="production">
            <security-domain>exo-domain</security-domain>
            <access-control>optional</access-control>
            <authentication-policy>org.exoplatform.services.jcr.impl.core.access.JAASAuthenticator
            </authentication-policy>
            <workspaces>
                <workspace name="production">
                    <!-- for system storage -->
                    <container class="org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer">
                        <properties>
                            <property name="source-name" value="jdbcjcr"/>
                            <property name="dialect" value="mysql-utf8"/>
                            <property name="multi-db" value="false"/>
                            <property name="update-storage" value="false"/>
                            <property name="max-buffer-size" value="200k"/>
                            <property name="swap-directory" value="../../ide-db/swap/production"/>
                        </properties>
                    </container>
                    <initializer class="org.exoplatform.services.jcr.impl.core.ScratchWorkspaceInitializer">
                        <properties>
                            <property name="root-nodetype" value="nt:unstructured"/>
                            <property name="root-permissions"
                                      value="any read;*:/ide/administrators read;*:/ide/administrators add_node;*:/ide/administrators set_property;*:/ide/administrators remove;*:/ide/developers read;*:/ide/developers add_node;*:/ide/developers set_property;*:/ide/developers remove;"/>
                        </properties>
                    </initializer>
                    <cache enabled="true" class="org.exoplatform.services.jcr.impl.dataflow.persistent.LinkedWorkspaceStorageCacheImpl">
                        <properties>
                            <property name="max-size" value="10k"/>
                            <property name="live-time" value="1h"/>
                        </properties>
                    </cache>
                    <query-handler class="org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex">
                        <properties>
                            <property name="index-dir" value="../../ide-db/jcrlucenedb/production"/>
                        </properties>
                    </query-handler>
                    <lock-manager>
                        <time-out>15m</time-out>
                        <persister class="org.exoplatform.services.jcr.impl.core.lock.FileSystemLockPersister">
                            <properties>
                                <property name="path" value="../../ide-db/lock/production"/>
                            </properties>
                        </persister>
                    </lock-manager>
                </workspace>

                <workspace name="dev-monit">
                    <container class="org.exoplatform.services.jcr.impl.storage.jdbc.JDBCWorkspaceDataContainer">
                        <properties>
                            <property name="source-name" value="jdbcjcr"/>
                            <property name="dialect" value="mysql-utf8"/>
                            <property name="multi-db" value="false"/>
                            <property name="update-storage" value="false"/>
                            <property name="max-buffer-size" value="200k"/>
                            <property name="swap-directory" value="../../ide-db/swap/dev-monit"/>
                        </properties>
                    </container>
                    <initializer class="org.exoplatform.services.jcr.impl.core.ScratchWorkspaceInitializer">
                        <properties>
                            <property name="root-nodetype" value="nt:unstructured"/>
                            <property name="root-permissions"
                                      value="any read;*:/ide/administrators read;*:/ide/administrators add_node;*:/ide/administrators set_property;*:/ide/administrators remove"/>
                        </properties>
                    </initializer>
                    <cache enabled="true" class="org.exoplatform.services.jcr.impl.dataflow.persistent.LinkedWorkspaceStorageCacheImpl">
                        <properties>
                            <property name="max-size" value="5k"/>
                            <property name="live-time" value="15m"/>
                        </properties>
                    </cache>
                    <query-handler class="org.exoplatform.services.jcr.impl.core.query.lucene.SearchIndex">
                        <properties>
                            <property name="index-dir" value="../../ide-db/jcrlucenedb/dev-monit"/>
                        </properties>
                    </query-handler>
                    <lock-manager>
                        <time-out>15m</time-out>
                        <persister class="org.exoplatform.services.jcr.impl.core.lock.FileSystemLockPersister">
                            <properties>
                                <property name="path" value="../../ide-db/lock/dev-monit"/>
                            </properties>
                        </persister>
                    </lock-manager>
                </workspace>
            </workspaces>
        </repository>
    </repositories>
</repository-service>
