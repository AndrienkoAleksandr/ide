<module>
   <inherits name="com.google.gwt.user.User" />
   <inherits name="org.exoplatform.ide.useragents" />

   <source path="" />

   <!-- Allow for conditional compilation per user.agent with a single "if": -->
   <set-property name="user.agent" value="safari, gecko1_8, ie9" />
   <replace-with class="org.exoplatform.ide.util.UserAgentStaticProperties.FirefoxImpl">
      <when-type-is class="org.exoplatform.ide.util.UserAgentStaticProperties" />
      <when-property-is name="user.agent" value="gecko1_8" />
   </replace-with>

   <replace-with class="org.exoplatform.ide.util.UserAgentStaticProperties.IEImpl">
      <when-type-is class="org.exoplatform.ide.util.UserAgentStaticProperties" />

      <any>
         <when-property-is name="user.agent" value="ie6" />
         <when-property-is name="user.agent" value="ie8" />
         <when-property-is name="user.agent" value="ie9" />
      </any>
   </replace-with>

   <!-- Restrict the build to Chrome, FF and english only for now. -->
   <set-property name="user.agent" value="safari,gecko1_8" />

   <replace-with class="org.exoplatform.ide.util.BrowserUtils.Chrome">
      <when-type-is class="org.exoplatform.ide.util.BrowserUtils" />
      <when-property-is name="user.agent" value="safari" />
   </replace-with>
   <replace-with class="org.exoplatform.ide.util.BrowserUtils.Firefox">
      <when-type-is class="org.exoplatform.ide.util.BrowserUtils" />
      <when-property-is name="user.agent" value="gecko1_8" />
   </replace-with>

   <!-- Following rules are order dependent: android and iphone have to come after "simple" safari -->
   <replace-with class="org.exoplatform.ide.util.UserAgentStaticProperties.SafariImpl">
      <when-type-is class="org.exoplatform.ide.util.UserAgentStaticProperties" />
      <when-property-is name="user.agent" value="safari" />
   </replace-with>

   <replace-with class="org.exoplatform.ide.util.UserAgentStaticProperties.AndroidImpl">
      <when-type-is class="org.exoplatform.ide.util.UserAgentStaticProperties" />
      <when-property-is name="mobile.user.agent" value="android" />
   </replace-with>

   <replace-with class="org.exoplatform.ide.util.UserAgentStaticProperties.IPhoneImpl">
      <when-type-is class="org.exoplatform.ide.util.UserAgentStaticProperties" />
      <when-property-is name="mobile.user.agent" value="iphone" />
   </replace-with>

</module>
